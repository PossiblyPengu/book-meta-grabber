# ğŸ“š Book Meta Grabber â€” iOS (Capacitor)

Mobile-first iOS app for fetching and editing metadata + cover art for ebooks and audiobooks.
Built with **Capacitor 5** + vanilla JS, styled with **iOS Liquid Glass** aesthetics.

---

## Supported Formats

| Format | Metadata Read | Cover Read |
|--------|:---:|:---:|
| EPUB   | âœ… OPF/DCTerms | âœ… |
| PDF    | âœ… PDF Info dict | â€” |
| MP3    | âœ… ID3v2 | âœ… |
| M4B / M4A | âœ… iTunes atoms | âœ… |
| FLAC   | âœ… Vorbis comments | âœ… |
| OGG    | âœ… Vorbis comments | âœ… |

## File Sources

| Source | Method |
|--------|--------|
| **Local Storage** | Capacitor Document Picker â†’ native iOS Files sheet |
| **iCloud Drive** | Same picker â€” iCloud Drive appears automatically in Files |
| **Google Drive** | OAuth2 in-app browser â†’ Google Picker â†’ download via Drive API |

## Metadata Sources (All queried in parallel)

- Google Books API
- Open Library (OpenLibrary.org)
- iTunes / Apple Books API
- MusicBrainz + Cover Art Archive

---

## Setup

### 1. Install dependencies

```bash
npm install
```

### 2. Build web assets

```bash
npm run build
```

### 3. Sync to iOS

```bash
npm run cap:sync
```

### 4. Open in Xcode

```bash
npm run cap:open
```

Then run on your iPhone or simulator.

---

## Google Drive Setup

1. Go to [Google Cloud Console](https://console.cloud.google.com)
2. Create an OAuth 2.0 Client ID for iOS
3. Add your bundle ID `com.andrew.bookmetagrabber`
4. Paste the Client ID in the app's **Settings** tab

---

## Project Structure

```
book-meta-mobile/
â”œâ”€â”€ capacitor.config.json    â† Capacitor config (appId, webDir, plugins)
â”œâ”€â”€ vite.config.js           â† Builds ios-app/ â†’ dist/
â”œâ”€â”€ ios-app/
â”‚   â”œâ”€â”€ index.html           â† App shell (3 tabs + editor + sheets)
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ mobile.css       â† iOS Liquid Glass design system
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ app.js           â† All UI logic, state, routing, haptics
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ apis/index.js        â† Google Books, Open Library, iTunes, MusicBrainz
â”‚   â”œâ”€â”€ extractors/index.js  â† Browser-safe EPUB/PDF/audio parsers (CDN libs)
â”‚   â”œâ”€â”€ fileSources.js       â† Local picker, iCloud, Google Drive OAuth
â”‚   â””â”€â”€ storage.js           â† Capacitor Preferences persistence
â””â”€â”€ ios/                     â† Generated by `npx cap add ios`
```

## UX Highlights

- **Bottom tab bar** with spring-animated tab switching (Library / Search / Settings)
- **Source picker bottom sheet** with iOS spring physics (`cubic-bezier(0.34,1.2,0.64,1)`)
- **Full-screen editor** slides up from bottom with blurred cover art hero
- **Cover art bleeds** edge-to-edge behind a gradient overlay â€” album-art style
- **Results half-sheet** drags up to reveal search results without leaving the editor
- **Haptic feedback** on every meaningful interaction via `@capacitor/haptics`
- **Safe area insets** everywhere (`env(safe-area-inset-*)`) for Dynamic Island and home indicator
- **44pt minimum touch targets** throughout
- **Auto-fetch** enriches metadata from APIs automatically on import
